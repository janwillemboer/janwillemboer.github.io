<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Introduction to programming - recap quiz</title>
    <style>
    </style>

    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
            font-size: 14px;
            line-height: 1.6;
        }

        .question {
            width: 1000px;
        }

        .text {
            vertical-align: top;
        }

        .a1,
        .a2 {
            background-color: #eee;
        }

        .a1 {
            vertical-align: top;
            color: #999;
            width: 30px;
        }

        .a2 {
            width: 800px;
        }

        .a2:hover {
            background-color: #ddd;
            cursor: pointer;
        }

        .selected .a1 {
            background-color: skyblue;
            color: black !important;
        }

        .correct .a1 {
            background-color: green;
            color: white !important;
        }

        .wrong .a1 {
            background-color: red;
            color: white !important;
        }

        .correct .a2,
        .correct-not-selected .a2 {
            background-color: lightgreen;
        }

        .image {
            text-align: right;
        }

        .box {
            margin-top: 9px;
            width: 700px;
        }

        pre {
            margin: 0px;
            padding: 0px;
        }

        #wrapup {
            display: none;
        }

        #qrcanv {
            position: relative;
            left: 700px;
        }
        #explwrapper {
            margin-top: -200px;
            margin-right: 200px;
        }
    </style>

</head>

<body class="vscode-light">

    <h1>Introduction to programming - recap quiz</h1>
    <div id="question">
        <p>Question <span id="number">1</span>/<span id="total">1</span></p>
        <p class="image">
            <img src="q1.png" id="image">
        </p>
        <h2 id="title">The title of the question</h2>
        <div>
            <table>
                <tr id="answer0" onclick="select(0)">
                    <td class="a1">A.</td>
                    <td id="answer0_text" class="a2">Option 0</td>
                </tr>
                <tr id="answer1" onclick="select(1)">
                    <td class="a1">B.</td>
                    <td id="answer1_text" class="a2">Option 1</td>
                </tr>
                <tr id="answer2" onclick="select(2)">
                    <td class="a1">C.</td>
                    <td id="answer2_text" class="a2">Option 2</td>
                </tr>
                <tr id="answer3" onclick="select(3)">
                    <td class="a1">D.</td>
                    <td id="answer3_text" class="a2">Option 3</td>
                </tr>
                <tr id="answer4" onclick="select(4)">
                    <td class="a1">E.</td>
                    <td id="answer4_text" class="a2">Option 4</td>
                </tr>
                <tr id="answer5" onclick="select(5)">
                    <td class="a1">F.</td>
                    <td id="answer5_text" class="a2">Option 5</td>
                </tr>
            </table>
        </div>
        <canvas id="qrcanv">
        </canvas>
        <div id="explanation_row" class="box">
            <div id="explwrapper"><strong>Explanation:</strong> <span id="explanation"></div>
            <a id="url" href="#" target="explanation">Extra material about the subject <span id="subject"></span></a>
        </div>
        <div class="box">
            <input type="button" value="Submit" id="submit" onclick="submitQ()">
            <input type="button" value="Next" id="next" onclick="nextQ()">
        </div>
    </div>
    <div id="wrapup" class="overhead">
        <p>Your score is <span id="score"></span></p>
        <p>According to the questions that were harder to answer, consider looking at the following extra material:</p>
        <ul id="extralinks">

        </ul>
    </div>

    <!-- QR code generation from https://code.google.com/archive/p/jsqrencode/downloads -->
    <script src="qr.js"></script>
    <script>
        setupqr('qrcanv', 200, 200);
    </script>

    <script>
        var questions = [
            {
                title: "What is the output of this program?",
                image: "q1.png",
                answers: [
                    "##==\nx",
                    "##\n==x",
                    "##\n==\nx",
                    "#\n#\n==\nx"
                ],
                correct: [0],
                explanation: "Only the printLine statement will start a new line after what should be printed",
                url: "../IP2020-Week1-extra-oefeningen.html",
                subject: "Methods 1"
            },
            {
                title: "What is the output of this program?",
                image: "q2.png",
                answers: [
                    "2019", "2020", "2021", "Nothing: it does not compile"
                ],
                correct: [2],
                explanation: "Year++ adds one to the year variable, which will become 2021",
                url: "../IP2020-Week1-extra-oefeningen.html",
                subject: "Variables 1"
            },
            {
                title: "The SaxionApp class has a method readChar(). What are correct ways to use this method?",
                answers: [
                    "String c = SaxionApp.readChar();",
                    "char c = SaxionApp.readChar();",
                    "SaxionApp.printLine(SaxionApp.readChar());",
                    "SaxionApp.readChar();",
                ],
                code: [0, 1, 2, 3],
                correct: [1, 2, 3],
                explanation: "The method returns a char, so all uses where a char is used are correct. The printLine method also can receive a char as input. The last answer is also correct: it is not required to use the returnvalue of the method.",
                url: "../IP2020-Week2-extra-oefeningen.html",
                subject: "Methods 2"
            },
            {
                title: "What is the value of \"prefix\" after this code?",
                image: "q4.png",
                answers: [
                    "unknown",
                    "sir",
                    "madam",
                    "human",
                ],
                correct: [3],
                explanation: "",
                url: "../IP2020-Week2-extra-oefeningen.html",
                subject: "If statements 1"
            },
            {
                title: "What is the output of this program?",
                image: "q5.png",
                answers: [
                    "Music from the 30s",
                    "Music from the 20s",
                    "Music from the 10s",
                    "Music from the 2000s",
                ],
                correct: [0],
                explanation: "The program is buggy: it appears to select the correct term based on the year, but the first if-statement will in all cases be the first one to be true, and the other statements won't be evaluated.",
                url: "../IP2020-Week2-extra-oefeningen.html",
                subject: "If statements 1"
            },
            {
                title: "What is the output of this program?",
                image: "q6.png",
                answers: [
                    "##",
                    "###",
                    "####",
                    "it does not compile",
                ],
                correct: [1],
                explanation: "The loop condition will be true for index 0, 1 and 2, so it will print # three times.",
                url: "../IP2020-Week3-extra-oefeningen.html",
                subject: "Loops 1"
            },
            {
                title: "We want to stop this loop if the user presses \"n\". What statement is needed at the // TODO line?",
                image: "q7.png",
                answers: [
                    "None, it is good as it is.",
                    "shouldContinue = false;",
                    "break;",
                    "shouldContinue = answer != 'n';",
                    "if (answer == \"y\") {\n  shouldContinue = true;\n}"
                ],
                code: [1, 2, 3, 4],
                correct: [3],
                explanation: "the boolean shouldContinue needs to become false to stop the loop. The condition when this happens is when answer is not 'n'. We can assign this condition directly to the shouldContinue variable.",
                url: "../IP2020-Week3-extra-oefeningen.html",
                subject: "If statements 2"
            },
            {
                title: "If I want to use the following code, what would be a valid implementation for the method \"askName\"?\n\nString name = askName(3);\nSaxionApp.printLine(name);",
                answers: [
                    "public static String askName(int minLength) {\n" +
                    "    String name = \"\";\n" +
                    "    while (name.length() < minLength) {\n" +
                    "      SaxionApp.printLine(\"What is your name?\");\n" +
                    "      name = SaxionApp.readString();\n" +
                    "    }\n" +
                    "    return name;\n" +
                    "}",
                    "public static void askName(String name) {\n" +
                    "    SaxionApp.printLine(\"What is your name?\");\n" +
                    "    name = SaxionApp.readString();\n" +
                    "}",
                    "public static String askName() {\n" +
                    "    SaxionApp.printLine(\"What is your name?\");\n" +
                    "    return SaxionApp.readString();\n" +
                    "}",
                    "public static void askName(int number) {\n" +
                    "    String name = \"\";\n" +
                    "    while (name.length() < minLength) {\n" +
                    "      SaxionApp.printLine(\"What is your name?\");\n" +
                    "      name = SaxionApp.readString();\n" +
                    "    }\n" +
                    "    return name;\n" +
                    "}",
                    "public static String askName(int number) {\n" +
                    "    SaxionApp.printLine(\"What is your name?\");\n" +
                    "    name = SaxionApp.readString();\n" +
                    "}",
                ],
                code: [0, 1, 2, 3, 4],
                correct: [0],
                explanation: "The method needs a returntype of type String and a parameter of type int or double. Also it needs have a return statement in the method body. Only A meets all of these requirements.",
                url: "../IP2020-Week4-extra-oefeningen.html",
                subject: "Methods 3"
            },
            {
                title: "What is the output of this program?",
                image: "q9.png",
                answers: [
                    "Nothing, it crashes.",
                    "Kees",
                    "Truus",
                    "Mo",
                ],
                correct: [2],
                explanation: "The first value (index 0) is first set on \"Kees\", but on the next line it is overwritten with the value \"Truus\". The remove call doesn't have any effect, because the item is not on the list, and ArrayList.remove() does not crash if the item is not found. So printing get(0) will get the last value on index 0, which is Truus.",
                url: "../IP2020-Week5-extra-oefeningen.html",
                subject: "Lists 1"
            },
            {
                title: "What is the output of this program?",
                image: "q10.png",
                answers: [
                    "Nothing, it crashes",
                    "Kees\nHenk\nKlaas",
                    "Kees\nTruus\nKlaas",
                    "This code does not compile",
                ],
                correct: [1],
                explanation: "In an enhanced for-loop, the loopvariable is a copy for each item in the list. Changing this variable doesn't have any effect on the arraylist itself.",
                url: "../IP2020-Week5-extra-oefeningen.html",
                subject: "Loops 2"
            },
            {
                title: "Given this class, which of the following uses are correct?",
                image: "q11.png",
                answers: [
                    "Animal bear = Animal();\n" +
                    "bear.name = \"Bruintje\";\n" +
                    "bear.type = \"Stuffed bear\";\n" +
                    "bear.age = 50;\n",
                    "Animal winnie = new Animal();\n" +
                    "winnie.name = \"Winnie\";\n" +
                    "winnie.type = \"Stuffed bear\";\n" +
                    "winnie.age = 94;\n",
                    "int insect = new Animal();\n" +
                    "insect.name = \"Arnie\";\n" +
                    "insect.type = \"ant\";\n" +
                    "insect.age = 10;\n",
                    "Animal x;\n" +
                    "x = new Animal();\n",
                    "Animal.name = \"Hans\";\n" +
                    "Animal.type = \"parrot\";\n" +
                    "Animal.age = 10;\n\n" +
                    "SaxionApp.printLine(Animal);\n",
                    "Animal dog = new Animal();\n" +
                    "dog.name = \"Jade\";\n" +
                    "dog.variety = \"english sheepdog\";\n" +
                    "dog.age = 5;\n"
                ],
                code: [0, 1, 2, 3, 4, 5],
                correct: [1, 3],
                explanation: "The class always has to be instantiated with \"new Animal()\", which is not done on answers A and E, and has to be assigned to a variable of type Animal, which is not done on answer C. Only the fields that have been declared in the class may be used, so \"variety\" on answer F makes that a wrong answer. Answers B and D are correct: it is not required to fill all fields. ",
                url: "../IP2020-Week6-extra-oefeningen.html",
                subject: "Variables 2"
            },
            {
                title: "What is the output of this program?",
                image: "q12.png",
                answers: [
                    "It runs in an endless loop",
                    "0\n1\n2\n3",
                    "1\n2\n3",
                    "3\n2\n1\n0",
                    "3\n2\n1",
                ],
                correct: [4],
                explanation: "The for loop variable i starts with value 3, so that is the first value that is printed, this leaves only answers D and E. The loop counts back (i--), so the next values are 2 and 1. It runs only when the condition i>0 is true, so it won't print the 0 itself, but leave the loop as soon as i becomes 0.",
                url: "../IP2020-Week7-extra-oefeningen.html",
                subject: "Loops 3"
            },
            {
                title: "Which of these uses of arrays are correct?",
                answers: [
                    "double[] x = new double[4];\nx[0] = 10.3;",
                    "int[] x = new int[10];\nx[2] = 11;",
                    "char[] x = {'a', 'b', 'c'};\nSaxionApp.printLine(x[2]);",
                    "Circle[] x = new Circle[10];\nx[0] = new Circle();\nx[0].radius = 10;",
                    "String[] x;\nx = new String[1];\nx[0] = \"hi\";"
                ],
                code: [0, 1, 2, 3, 4],
                correct: [0, 1, 2, 3, 4],
                explanation: "",
                url: "../IP2020-Week7-extra-oefeningen.html",
                subject: "Lists 2"
            },
        ];

        var currentQuestion = 0;
        var takeInput = true;
        var errors = [];

        var number = document.getElementById("number");
        var total = document.getElementById("total");
        total.innerText = questions.length;
        var title = document.getElementById("title");
        var image = document.getElementById("image");
        var explanation = document.getElementById("explanation");
        var explanation_row = document.getElementById("explanation_row");
        var url = document.getElementById("url");
        var subject = document.getElementById("subject");

        var submit = document.getElementById("submit");
        var next = document.getElementById("next");
        var qrcanv = document.getElementById("qrcanv");

        showQuestion();

        function showQuestion() {
            var q = questions[currentQuestion];

            number.innerText = currentQuestion + 1;
            title.innerText = q.title;

            if (q.image) {
                image.src = q.image;
                image.style.display = "block";
            } else {
                image.style.display = "none";
            }

            explanation.innerText = q.explanation;
            var href = location.href + q.url;
            url.setAttribute("href", href);
            doQR(href);
            subject.innerText = q.subject;

            var answers = q.answers;
            for (var i = 0; i < 6; i++) {
                var option = document.getElementById("answer" + i);
                option.className = "";
                if (i >= answers.length) {
                    option.style.display = "none";
                } else {
                    option.style.display = "block";
                }
                var text = document.getElementById("answer" + i + "_text");
                if (q.code && q.code.indexOf(i) > -1) {
                    text.innerHTML = "<pre>" + answers[i] + "</pre>";
                } else {
                    text.innerText = answers[i];
                }
            }

            submit.setAttribute("disabled", "disabled");
            next.setAttribute("disabled", "disabled")
            explanation_row.style.display = "none";
            qrcanv.style.display = "none";

            takeInput = true;
        }

        function select(answer) {
            if (!takeInput) {
                return;
            }
            var option = document.getElementById("answer" + answer);
            if (option.className === "selected") {
                option.className = "";
            } else {
                option.className = "selected";
            }

            if (getSelectedOptions().length > 0) {
                submit.removeAttribute("disabled");
            } else {
                submit.setAttribute("disabled", "disabled");
            }
        }

        function submitQ() {
            var goodOptions = questions[currentQuestion].correct;

            var questionError = false;
            for (var i = 0; i < 6; i++) {
                var option = document.getElementById("answer" + i);
                var wasCorrect = goodOptions.indexOf(i) > -1;
                var isSelected = option.className === "selected";
                if (isSelected) {
                    if (wasCorrect) {
                        option.className = "correct";
                    } else {
                        option.className = "wrong";
                    }
                } else {
                    option.className = wasCorrect ? "correct-not-selected" : "";
                }

                if (isSelected !== wasCorrect) {
                    questionError = true;
                }
            }

            if (questionError) {
                errors.push(currentQuestion);
            }

            next.removeAttribute("disabled");
            submit.setAttribute("disabled", "disabled");
            explanation_row.style.display = "block";
            qrcanv.style.display = "block";
            takeInput = false;
        }

        function nextQ() {
            currentQuestion++;
            if (currentQuestion < questions.length) {
                showQuestion();
            } else {
                finish();
            }
        }

        function finish() {
            next.setAttribute("disabled", "disabled");
            submit.setAttribute("disabled", "disabled");

            var question = document.getElementById("question");
            question.style.display = "none";
            var wrapUp = document.getElementById("wrapup");
            wrapUp.style.display = "block";
            var score = document.getElementById("score");

            var userScore = Math.round(100 - errors.length * 100 / questions.length);
            score.innerText = userScore + "%";

            var extraLinks = document.getElementById("extralinks");
            if (errors.length === 0) {
                extraLinks.innerHTML = "<li>None, well done</li>";
            } else {
                var lis = "";
                var subjects = [];
                for (var i = 0; i < errors.length; i++) {
                    var subj = questions[i].subject;
                    if (subjects.indexOf(subj) === -1) {
                        lis += "<li><a target='explanation' href='" + url + "'>" + subj + "</a></li>";
                    }
                }
                extraLinks.innerHTML = lis;
            }
        }

        function getSelectedOptions() {
            var result = [];
            for (var i = 0; i < 6; i++) {
                var option = document.getElementById("answer" + i);
                if (option.className === "selected") {
                    result.push(i);
                }
            }
            return result;
        }
    </script>


</body>

</html>